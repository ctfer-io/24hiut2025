from datetime import datetime
import requests

# fake url, waiting for front-end to be ready
url = "http://127.0.0.1:8000"
output_file = "/tmp/data.txt"


def log_to_file(message):
    timestamp = datetime.now().strftime("[%Y-%m-%d %H:%M:%S]")
    with open(output_file, "a") as file:
        file.write(f"{timestamp} {message}\n")


try:
    response = requests.get(url, timeout=5)
    response.raise_for_status()
    log_to_file(response.text)

except requests.exceptions.RequestException as e:
    log_to_file(f"Error: {e}")
