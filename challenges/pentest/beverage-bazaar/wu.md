# WRITE-UP BEVERAGE BAZAAR

## Ports ouverts

On scanne la machine pour rechercher des ports ouverts :

```bash
nmap -F 192.168.1.1
---
PORT   STATE SERVICE
2100/tcp open  ftp
22/tcp open  ssh
```

Le port SSH nous demande un mot de passe, sachant que ce service est compliqué à bruteforcer (avec les timeout) on se concentre sur le serveur FTP.

## Serveur FTP

On n'a aucun identifiant pour se connecter sur la machine.
On essaye donc de se connecter en utilisateur anonyme sur le serveur FTP :

```bash
ftp 192.168.1.1
Connected to 192.168.1.1.
220 Welcome to PopaCola file server.
Name (192.168.1.1:username): anonymous
331 Please specify the password.
Password:
230 Login successful.
Remote system type is UNIX.
Using binary mode to transfer files.
```

BINGO, on est connecté, plus qu'à trouver les fichiers d'intérêt dans le vault Obsidian !

## Chasse aux identifiants

```bash
wget -m ftp://anonymous:null@192.168.1.1:21 -P output_folder
```

Plusieurs fichiers ont l'air intéressant, notamment ceux concernant les utilisateurs.
Cependant, on s'aperçoit vite que les mots de passe donnés ne fonctionnent pas, on peut donc chercher à rechercher les différents nom d'utilisateur dans les fichiers :

```bash
grep -ERi "\smarc|\salicia|\ssophie" output_folder
```

Dans le fichier `Meeting_Notes_March.md` on apprend que le mot de passe de Marc a été changé.

On essaye de se connecter en SSH sur la machine avec `<username>:<password>` et on a notre flag !

> Note: Sans l'option `-m` sur `wget`, on n'aurait pas copié l'arborescence complète et on serait passé à côté du fichier intéressant.
